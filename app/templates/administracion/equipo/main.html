<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="{{ url_for('static', filename='../static/images/Logo-uexternado.png') }}">
    <link rel="stylesheet" href="{{url_for('static',filename='../static/dist/css/output.css')}}">
    <script src="https://kit.fontawesome.com/175f4319ea.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="{{url_for('static', filename='../static/dist/js/numpad.js')}}"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <title>Document</title>
</head>

<body class="fondo bg-cover bg-no-repeat">
    <header class="flex row bg-white max-h-32 justify-between items-center">
        <img src="{{url_for('static',filename='../static/images/logo-uec.png')}}" alt=""
            class="object-contain w-1/6 aspect-3/2 mx-4">
            <button onclick="reload()" class="text-green-900 m-16 text-2xl font-semibold p-4 rounded-xl hover:text-green-800 hover:shadow-2xl">
                <i class="fa-solid fa-rotate-right mx-4" style="color: #14532d;"></i>Recargar Pagina
            </button>
        <div>
            <ul class="flex flex-row">
                <li>
                    <form action="{{ url_for('usuario.logout') }}" method="post">
                        <button class="text-green-900 m-16 text-2xl font-semibold p-4 rounded-xl hover:text-green-800 hover:shadow-2xl">
                            <i class="fa-solid fa-hand-point-left"></i> Salir
                        </button>
                    </form>
                </li>
            </ul>
        </div>
    </header>
    
    <div class="flex justify-between">
            <div class="equipos flex flex-row justify-between">
                <div class="izquierda">
                    <div class="my-10 mx-32 grid gap-x-20 gap-y-2 grid-cols-3 w-1/3 justify-items-center">
                        <!--
                        {% for i in range(68, 65,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {{ i  }} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {{ i }}
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}

                        {% for i in range(60, 57,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {{ i  }} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {{ i }}
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}

                        {% for i in range(52, 49,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {{ i  }} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {{ i }}
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}

                        {% for i in range(44, 41,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {{ i  }} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {{ i }}
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}


                        {% for i in range(41, 38,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {{ i  }} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {{ i }}
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}


                        {% for i in range(38, 35,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {{ i  }} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {{ i }}
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}

                        {% for i in range(32, 29,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {{ i  }} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {{ i }}
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}


                        {% for i in range(24, 21,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {{ i  }} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {{ i }}
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}


                        {% for i in range(16, 13,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {{ i  }} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {{ i }}
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}


                        {% for i in range(8, 5,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {% if i < 10 %} 0{{ i }} {% else %} {{ i }} {% endif %}  
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {% if i < 10 %} 0{{ i }} {% else %} {{ i }} {% endif %} 
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}

                    </div>
                </div>
                <div class="derecha">
                    <div class="my-10 mx-32 grid gap-x-20 gap-y-3 grid-cols-5 w-1/3 justify-items-center">
                        {% for i in range(65, 60,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {{ i  }} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {{ i }}
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}
                        
                        {% for i in range(57, 52,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {{ i  }} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {{ i }}
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}

                        {% for i in range(49, 44,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {{ i  }} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {{ i }}
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}
                    </div>

                    <div class="flex flex-col mx-32 justify-center w-1/3">
                        <h4 class="info_recep">¡Usted esta aquí!</h4>
                        <img class="recepcion" src="{{ url_for('static', filename='../static/images/recepcion.png') }}" alt="Not Found">
                    </div>
                    <div class="flex flex-row justify-end line-3">
                        {% for i in range(35, 32,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {{ i  }} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {{ i }}
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}
                    </div>
                    <div class="mb-10 mt-4 mx-32 grid gap-x-20 gap-y-3 grid-cols-5 w-1/3 justify-items-center">
                        {% for i in range(29,24,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {{ i  }} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {{ i }}
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}
                        {% for i in range(21, 16,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {% if i < 10 %} 0{{ i }} {% else %} {{ i }} {% endif %} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {% if i < 10 %} 0{{ i }} {% else %} {{ i }} {% endif %} 
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}
                        {% for i in range(13, 8,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {% if i < 10 %} 0{{ i }} {% else %} {{ i }} {% endif %} 
                            </a>
                            {% else %}
                            <button  style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {% if i < 10 %} 0{{ i }} {% else %} {{ i }} {% endif %} 
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}
                        {% endfor %}
                        {% for i in range(5, 0,-1) %}
                            {% for equipo in equipos %}
                            {% if equipo.idEquipo==i %}
                            {% if equipo.estadoEquipo == "usado" %}
                            <a style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right_usado" value="{{ i }}" name="action" onclick="equipoUsado({{ i }})">
                                {% if i < 10 %} 0{{ i }} {% else %} {{ i }} {% endif %} 
                            </a>
                            {% else %}
                            <button style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ i }}" name="action" onclick="confirmarPrestamo({{ i }})">
                                {% if i < 10 %} 0{{ i }} {% else %} {{ i }} {% endif %} 
                            </button>
                            {% endif %}
                            {% endif %}
                            {% endfor %}    
                        {% endfor %}
                            -->
                            <button style="padding: 24.5px; padding-bottom: 18px; padding-top: 17px" class="cta__right" value="{{ 1000 }}" name="action" onclick="confirmarPrestamo(1000)">
                                admin
                            </button>
                    </div>
                </div>
            </div>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="mt-10 mx-5 h-min

                                            {% if category == 'success' %}
                                                bg-green-100 border border-green-400 text-green-700
                                            {% elif category == 'error' %}
                                                bg-red-100 border border-red-400 text-red-700
                                            {% elif category == 'warning' %}
                                                bg-yellow-100 border border-yellow-400 text-yellow-700
                                            {% endif %}

                        px-4 py-3 rounded relative" role="alert">
                        <strong class="font-bold">
                            {% if category == 'success' %}
                            Éxito:
                            {% elif category == 'error' %}
                            Error:
                            {% elif category == 'warning' %}
                            Advertencia:
                            {% endif %}
                        </strong>
                        <span class="block sm:inline">{{ message }}</span>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <div>
            <img class="mr-52" src="{{ url_for('static', filename='../static/images/main.png') }}" alt="Not Found">
        </div>


    </div>
    <script>
        function confirmarPrestamo(equipoId) {
            Swal.fire({
                title: '¿Estás seguro?',
                text: "¿Deseas pedir el equipo " + equipoId + "?",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Sí, confirmar',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Crear un formulario y enviarlo usando AJAX
                    $.ajax({
                        url: "{{ url_for('equipo.pedir_equipo') }}",
                        type: 'POST',
                        data: { pc: equipoId },
                        success: function (response) {
                            if (response.status === 'success') {
                                Swal.fire({
                                    icon: 'success',
                                    title: 'Éxito',
                                    text: response.message,
                                    confirmButtonColor: '#3085d6'
                                }).then(()=>{
                                    window.location.href = "{{ url_for('usuario.login') }}";
                                })
                            } else if (response.status === 'warning') {
                                Swal.fire({
                                    icon: 'warning',
                                    title: 'Advertencia',
                                    text: response.message,
                                    confirmButtonColor: '#3085d6'
                                });
                            } else if (response.status === 'error') {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Error',
                                    text: response.message,
                                    confirmButtonColor: '#3085d6'
                                });
                            }
                        },
                        error: function () {
                            Swal.fire({
                                icon: 'error',
                                title: 'Error',
                                text: 'Ocurrió un error al procesar la solicitud.',
                                confirmButtonColor: '#3085d6'
                            });
                        }
                    });
                }
            });
        }
        function equipoUsado(equipoId){
            Swal.fire({
                title: '¡Equipo en uso!',
                text: "El equipo " + equipoId + " ya esta en uso",
                icon: 'warning',
                showCancelButton: false,
                confirmButtonColor: '#3085d6',
                confirmButtonText: 'Volver',
            })
        }
        function reload(){
            window.location.reload();
        }
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script>
        $("body").on("contextmenu", function (e) {
            return false;
        })
    </script>
</body>



</html>